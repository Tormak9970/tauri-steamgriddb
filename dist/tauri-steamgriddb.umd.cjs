(function(u,y){typeof exports=="object"&&typeof module<"u"?y(exports,require("@tauri-apps/api")):typeof define=="function"&&define.amd?define(["exports","@tauri-apps/api"],y):(u=typeof globalThis<"u"?globalThis:u||self,y(u["tauri-steamgriddb"]={},u.api))})(this,function(u,y){"use strict";var I=Object.defineProperty;var E=(u,y,c)=>y in u?I(u,y,{enumerable:!0,configurable:!0,writable:!0,value:c}):u[y]=c;var g=(u,y,c)=>(E(u,typeof y!="symbol"?y+"":y,c),c);class c extends Error{constructor(t,a){super(t);g(this,"response");this.name="Request Error",this.response=a}}class G{constructor(e){g(this,"key");g(this,"baseURL");g(this,"headers");var t,a;typeof e=="string"&&(e={key:e}),this.baseURL=(t=e.baseURL)!=null?t:"https://www.steamgriddb.com/api/v2",this.key=(a=e.key)!=null?a:"",this.headers={},e.headers&&(this.headers=Object.assign({},e.headers)),this.key?this.headers.Authorization=`Bearer ${this.key}`:process.emitWarning("API Key not provided, some methods won't work.")}buildQuery(e){const t=["styles","dimensions","mimes","types","platformdata"],a=["nsfw","humor","epilepsy","oneoftag","page"],i={};return t.forEach(s=>{var n;(n=e[s])!=null&&n.length&&(i[s]=e[s].join(","))}),a.forEach(s=>{typeof e[s]<"u"&&(i[s]=e[s])}),i}async handleRequest(e,t,a={},i=null){var d,h,o,l,m,p,f;let s=null;Object.entries(a).length>0&&(s="",Object.entries(a).forEach(([w,b])=>{s=s.concat(`&${w}=${b}`)}),s=s.substring(1));let n={headers:this.headers,method:e};i&&(n=Object.assign({},n,{formData:i}));let r=await y.http.fetch(`${this.baseURL}${t}${s?`?${s}`:""}`,n);if(r.ok){if(r!=null&&r.data.success)return(d=r.data.data)!=null?d:r.data.success;throw new c((l=(o=(h=r.data)==null?void 0:h.errors)==null?void 0:o.join(", "))!=null?l:"Unknown SteamGridDB error.",r)}else throw new c((f=(p=(m=r.data)==null?void 0:m.errors)==null?void 0:p.join(", "))!=null?f:"SteamGridDB error.",r)}async searchGame(e){return await this.handleRequest("GET",`/search/autocomplete/${encodeURIComponent(e)}`)}async getGame(e,t){return t?await this.handleRequest("GET",`/games/${e.type}/${e.id}`,this.buildQuery(t)):await this.handleRequest("GET",`/games/${e.type}/${e.id}`)}async getGameById(e,t){return this.getGame({id:e,type:"id"},t)}async getGameBySteamAppId(e,t){return this.getGame({id:e,type:"steam"},t)}async getGrids(e){return await this.handleRequest("GET",`/grids/${e.type}/${e.id}`,this.buildQuery(e))}async getGridsById(e,t,a,i,s,n,r,d,h){return this.getGrids({type:"game",id:e,styles:t,dimensions:a,mimes:i,types:s,nsfw:n,humor:r,epilepsy:d,page:h})}async getGridsBySteamAppId(e,t,a,i,s,n,r,d,h){return this.getGrids({type:"steam",id:e,styles:t,dimensions:a,mimes:i,types:s,nsfw:n,humor:r,epilepsy:d,page:h})}async getHeroes(e){return await this.handleRequest("GET",`/heroes/${e.type}/${e.id}`,this.buildQuery(e))}async getHeroesById(e,t,a,i,s,n,r,d,h){return this.getHeroes({type:"game",id:e,styles:t,dimensions:a,mimes:i,types:s,nsfw:n,humor:r,epilepsy:d,page:h})}async getHeroesBySteamAppId(e,t,a,i,s,n,r,d,h){return this.getHeroes({type:"steam",id:e,styles:t,dimensions:a,mimes:i,types:s,nsfw:n,humor:r,epilepsy:d,page:h})}async getIcons(e){return await this.handleRequest("GET",`/icons/${e.type}/${e.id}`,this.buildQuery(e))}async getIconsById(e,t,a,i,s,n,r,d,h){return this.getIcons({type:"game",id:e,styles:t,dimensions:a,mimes:i,types:s,nsfw:n,humor:r,epilepsy:d,page:h})}async getIconsBySteamAppId(e,t,a,i,s,n,r,d,h){return this.getIcons({type:"steam",id:e,styles:t,dimensions:a,mimes:i,types:s,nsfw:n,humor:r,epilepsy:d,page:h})}async getLogos(e){return await this.handleRequest("GET",`/logos/${e.type}/${e.id}`,this.buildQuery(e))}async getLogosById(e,t,a,i,s,n,r,d,h){return this.getLogos({type:"game",id:e,styles:t,dimensions:a,mimes:i,types:s,nsfw:n,humor:r,epilepsy:d,page:h})}async getLogosBySteamAppId(e,t,a,i,s,n,r,d,h){return this.getLogos({type:"steam",id:e,styles:t,dimensions:a,mimes:i,types:s,nsfw:n,humor:r,epilepsy:d,page:h})}async deleteGrids(e){const t=Array.isArray(e)?e.join(","):e.toString();return await this.handleRequest("DELETE",`/grids/${Array.isArray(t)?t.join(","):t}`)}}u.RequestError=c,u.SGDB=G,Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
